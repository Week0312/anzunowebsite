#!/usr/bin/env sh

# Husky
. "$(dirname -- "$0")/_/husky.sh"

# Load nvm (if you're using it)
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"

# Load Node.js and yarn
export PATH="$PATH:/opt/homebrew/bin:/usr/local/bin"

echo "🔍 Running pre-commit checks..."

# Run type-check
echo "Running type check..."
yarn type-check || {
    echo "❌ Type check failed"
    exit 1
}

# Run lint
echo "Running lint..."
yarn lint || {
    echo "❌ Lint failed"
    exit 1
}

# Run tests
echo "Running tests..."
yarn test || {
    echo "❌ Tests failed"
    exit 1
}

echo "✅ All checks passed"